<% if (title) { %>
<h1 class="form-header"><%= title %></h1>
<% } else { res.redirect('/') } %>

<div class="message-container">
  <% if (errors && errors.array().length > 0) { %>
  <ul class="notice">
    <% errors.array().forEach(error => { %>
    <li><%= error.msg %></li>
    <% }) %>
  </ul>
  <% } else { %>
  <div class="notice"><%- messages() %></div>
  <% } %>
</div>

<div class="form-container">
  <div class="add-inventory-container">
    <form id="addInventoryContainer" action="/inv/update" method="post">
      <label for="classificationId">Classification:</label>
      <%- classification %>

      <label for="invMake">Maker:</label>
      <input
        type="text"
        id="invMake"
        name="inv_make"
        required
        pattern="^[a-zA-Z0-9]+$"
        title="Maker name must not contain spaces or special characters. Only letters and numbers are allowed."
        value="<%= locals.inv_make %>"
      />
      <label for="invModel">Model:</label>
      <input
        type="text"
        id="invModel"
        name="inv_model"
        required
        pattern="^[a-zA-Z0-9]+$"
        title="Model name must not contain spaces or special characters. Only letters and numbers are allowed."
        value="<%= locals.inv_model %>"
      />
      <label for="invYear">Year:</label>
      <input
        type="text"
        id="invYear"
        name="inv_year"
        required
        pattern="^(19|20)\d{2}$"
        title="Year must be a number between 1900 and 2100."
        value="<%= locals.inv_year %>"
      />
      <label for="invDescription">Description:</label>
      <input
        type="text"
        id="invDescription"
        name="inv_description"
        required
        value="<%= locals.inv_description %>"
      />

      <label for="invThumbnail">Thumbnail:</label>
      <input
        type="text"
        id="invThumbnail"
        name="inv_thumbnail"
        required
        value="<%= locals.inv_thumbnail %>"
      />

      <label for="invImage">Image:</label>
      <input
        type="text"
        id="invImage"
        name="inv_image"
        required
        value="<%= locals.inv_image %>"
      />

      <label for="invPrice">Price:</label>
      <input
        type="text"
        id="invPrice"
        name="inv_price"
        required
        value="<%= locals.inv_price %>"
      />
      <label for="invMiles">Miles:</label>
      <input
        type="text"
        id="invMiles"
        name="inv_miles"
        required
        value="<%= locals.inv_miles %>"
      />
      <label for="invColor">Color:</label>
      <input
        type="text"
        id="invColor"
        name="inv_color"
        required
        pattern="^[a-zA-Z]+$"
        title="Color must only contain alphabetic characters (e.g., Red, Blue)."
        value="<%= locals.inv_color %>"
      />
      <input type="hidden" name="inv_id"
<% if(locals.inv_id) { %> value="<%= locals.inv_id %>"
<% } %>>

      <button type="submit">Update Vehicle</button>
    </form>
  </div>
</div>
